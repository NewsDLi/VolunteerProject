<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.volunteer.web.dao.UserInfoMapper">
 
    <select id="selectUserInfoByOpenId" parameterType="String"  resultType="com.volunteer.common.UserInfoBindCommand">
        SELECT
        info.NAME,
        info.sex,
        info.id_card idCard,
        info.worker,
        info.login_phone loginPhone,
        info.descption,
        info.hobby,
        info.user_pic userPic,
        info.version,
        info.update_by updateBy,
        info.lifecycle,
        info.role_type_id roleTypeId,
        info.GROUP,
        bind.user_id userId,
        bind.wechat_id wechatId
        FROM
        user_info info
        LEFT JOIN user_info_bind bind ON info.id = bind.user_id
        WHERE
        bind.wechat_id = ( SELECT id FROM wechat_info WHERE open_id = #{openId} )
    </select>


    <select id="selectUserInfoByMobile" parameterType="String"  resultType="UserInfo">
        SELECT
           *
        FROM
          user_info
        WHERE
          login_phone = #{mobile}
    </select>


</mapper>
